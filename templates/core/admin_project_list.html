{% extends 'base.html' %}
{% block title %}Manage Projects - Admin - ProjectHub{% endblock %}

{% block content %}
<h1 class="text-2xl font-semibold text-slate-900 mb-4">Manage Projects</h1>
<div class="flex items-center justify-between mb-4 text-sm">
  <p class="text-slate-600">Create, update and review project materials.</p>
  <a href="{% url 'admin-project-create' %}"
     class="inline-flex items-center px-3 py-1.5 rounded-md bg-sky-600 text-white text-xs font-medium hover:bg-sky-700">
    + New Project
  </a>
</div>

<div class="w-full overflow-x-auto">
<table class="min-w-full text-xs text-left bg-white border border-slate-200 rounded-lg">
  <thead class="bg-slate-50 border-b border-slate-200">
    <tr>
      <th class="px-3 py-2">Title</th>
      <th class="px-3 py-2">Department</th>
      <th class="px-3 py-2">Year</th>
      <th class="px-3 py-2">Price</th>
      <th class="px-3 py-2">Status</th>
      <th class="px-3 py-2">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for project in page_obj.object_list %}
      <tr class="border-b border-slate-100 last:border-b-0">
        <td class="px-3 py-2" title="{{ project.title }}">
          <div class="truncate w-48">{{ project.title }}</div>
        </td>
        <td class="px-3 py-2">{{ project.department }}</td>
        <td class="px-3 py-2">{{ project.year }}</td>
        <td class="px-3 py-2">â‚¦{{ project.price }}</td>
        <td class="px-3 py-2">
          {% if project.status == 'APPROVED' %}
            <span class="px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-700">Approved</span>
          {% elif project.status == 'PENDING' %}
            <span class="px-2 py-0.5 rounded-full bg-amber-50 text-amber-700">Pending</span>
          {% else %}
            <span class="px-2 py-0.5 rounded-full bg-red-50 text-red-700">Rejected</span>
          {% endif %}
        </td>
        <td class="px-3 py-2">
          <a href="{% url 'admin-project-edit' pk=project.id %}" class="text-sky-700 hover:underline">Edit</a>
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="6" class="px-3 py-4 text-center text-slate-500">No projects found.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
</div>

<div class="mt-4 text-xs flex items-center justify-between text-slate-600">
  <div>
    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
  </div>
  <div class="space-x-2">
    {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}" class="hover:text-sky-700">Previous</a>
    {% endif %}
    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}" class="hover:text-sky-700">Next</a>
    {% endif %}
  </div>
</div>
{% endblock %}
