<h1>Department Debug Information</h1>

<h2>Departments by Faculty</h2>
{% for faculty in faculty_names %}
    <h3>{{ faculty }} ({{ faculty_departments|get_item:faculty|length }} departments)</h3>
    <ul>
    {% for dept_name in faculty_departments|get_item:faculty %}
        <li>{{ dept_name }}</li>
    {% endfor %}
    </ul>
{% endfor %}

{% if 'No Faculty' in faculty_departments %}
    <h3>No Faculty ({{ faculty_departments|get_item:'No Faculty'|length }} departments)</h3>
    <ul>
    {% for dept_name in faculty_departments|get_item:'No Faculty' %}
        <li>{{ dept_name }}</li>
    {% endfor %}
    </ul>
{% endif %}

<h2>All Departments ({{ total_departments }})</h2>
<table border="1">
    <tr>
        <th>Name</th>
        <th>Faculty</th>
        <th>Code</th>
    </tr>
    {% for dept in departments %}
    <tr>
        <td>{{ dept.name }}</td>
        <td>{{ dept.faculty|default:"No Faculty" }}</td>
        <td>{{ dept.code|default:"No Code" }}</td>
    </tr>
    {% endfor %}
</table>