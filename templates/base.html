{% load static %}
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}ProjectHub - Verified Final Year Project Materials{% endblock %}</title>

  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="{% static 'img/favicon.png' %}" />

  <style>
    body {
      font-family: 'Inter', sans-serif;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f5f9;
    }

    ::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }

    /* Animation classes */
    .animate-fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .hover-scale {
      transition: transform 0.2s ease;
    }

    .hover-scale:hover {
      transform: translateY(-2px);
    }
  </style>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f0f9ff',
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9',
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e',
            },
            secondary: {
              50: '#f0fdf4',
              100: '#dcfce7',
              200: '#bbf7d0',
              300: '#86efac',
              400: '#4ade80',
              500: '#22c55e',
              600: '#16a34a',
              700: '#15803d',
              800: '#166534',
              900: '#14532d',
            }
          },
          animation: {
            'fade-in': 'fadeIn 0.5s ease-in-out',
            'slide-in': 'slideIn 0.3s ease-out',
          },
          keyframes: {
            slideIn: {
              from: { transform: 'translateX(-100%)' },
              to: { transform: 'translateX(0)' },
            }
          }
        }
      }
    }
  </script>

  {% block head_extra %}{% endblock %}
</head>

<body class="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 text-slate-900 font-sans">

  <!-- Navigation Bar -->
  <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200/50 shadow-sm">
    <div class="container mx-auto px-4 sm:px-6">
      <nav class="flex items-center justify-between h-16">
        <!-- Logo -->
        <a href="{% url 'landing' %}" class="flex items-center space-x-3 group">
          <div
            class="w-9 h-9 rounded-lg bg-gradient-to-br from-primary-600 to-secondary-600 flex items-center justify-center group-hover:from-primary-700 group-hover:to-secondary-700 transition-all duration-300">
            <i class="fas fa-graduation-cap text-white text-lg"></i>
          </div>
          <div>
            <span
              class="font-bold text-xl bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent">ProjectHub</span>
            <span class="block text-xs text-slate-500 -mt-1">Academic Excellence</span>
          </div>
        </a>

        <!-- Desktop Navigation -->
        <div class="hidden md:flex items-center space-x-1">
          <a href="{% url 'landing' %}"
            class="px-4 py-2 rounded-lg text-sm font-medium text-slate-700 hover:text-primary-600 hover:bg-primary-50 transition-all duration-200 flex items-center gap-2">
            <i class="fas fa-home text-sm"></i>
            Home
          </a>

          <a href="{% url 'project-list-page' %}"
            class="px-4 py-2 rounded-lg text-sm font-medium text-slate-700 hover:text-primary-600 hover:bg-primary-50 transition-all duration-200 flex items-center gap-2">
            <i class="fas fa-search text-sm"></i>
            Browse Projects
          </a>

          <a href="{% url 'topic-generator-page' %}"
            class="px-4 py-2 rounded-lg text-sm font-medium text-slate-700 hover:text-secondary-600 hover:bg-secondary-50 transition-all duration-200 flex items-center gap-2">
            <i class="fas fa-lightbulb text-sm"></i>
            Topic Generator
          </a>

          {% if user.is_authenticated %}
          <!-- User Dropdown -->
          <div class="relative group ml-2">
            <button
              class="flex items-center space-x-2 px-4 py-2 rounded-lg hover:bg-slate-100 transition-all duration-200">
              <div
                class="w-8 h-8 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center text-white text-sm font-bold">
                {{ user.username|first|upper }}
              </div>
              <span class="text-sm font-medium text-slate-700">{{ user.username }}</span>
              <i class="fas fa-chevron-down text-xs text-slate-500"></i>
            </button>

            <!-- Dropdown Menu -->
            <div
              class="absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg border border-slate-200 py-2 invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-200 z-50">
              <a href="{% url 'student-dashboard' %}"
                class="flex items-center gap-3 px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors duration-150">
                <i class="fas fa-tachometer-alt text-primary-600 w-5"></i>
                My Dashboard
              </a>

              {% if user.role == 'ADMIN' or user.role == 'SUPER_ADMIN' or user.is_staff %}
              <a href="{% url 'admin-dashboard' %}"
                class="flex items-center gap-3 px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors duration-150">
                <i class="fas fa-shield-alt text-secondary-600 w-5"></i>
                Admin Panel
              </a>
              {% endif %}

              <div class="border-t border-slate-100 my-2"></div>

              <form method="POST" action="{% url 'web-logout' %}" class="w-full">
                {% csrf_token %}
                <button type="submit"
                  class="flex items-center gap-3 w-full px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors duration-150">
                  <i class="fas fa-sign-out-alt w-5"></i>
                  Logout
                </button>
              </form>
            </div>
          </div>

          {% else %}
          <!-- Auth Buttons -->
          <div class="flex items-center space-x-3 ml-4">
            <a href="{% url 'login-page' %}"
              class="px-5 py-2 rounded-lg text-sm font-medium text-primary-600 hover:text-primary-700 hover:bg-primary-50 transition-all duration-200">
              Sign In
            </a>
            <a href="{% url 'register-page' %}"
              class="px-5 py-2 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-primary-600 to-secondary-600 hover:from-primary-700 hover:to-secondary-700 shadow-md hover:shadow-lg transition-all duration-200">
              Get Started
              <i class="fas fa-arrow-right ml-2 text-xs"></i>
            </a>
          </div>
          {% endif %}
        </div>

        <!-- Mobile Menu Button -->
        <button id="mobileMenuButton"
          class="md:hidden p-2 rounded-lg hover:bg-slate-100 transition-colors duration-200">
          <i class="fas fa-bars text-slate-700 text-lg"></i>
        </button>
      </nav>
    </div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="md:hidden hidden bg-white border-t border-slate-200 px-4 py-3 shadow-lg">
      <div class="space-y-2">
        <a href="{% url 'landing' %}"
          class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors duration-150">
          <i class="fas fa-home text-primary-600 w-5"></i>
          Home
        </a>

        <a href="{% url 'project-list-page' %}"
          class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors duration-150">
          <i class="fas fa-search text-primary-600 w-5"></i>
          Browse Projects
        </a>

        <a href="{% url 'topic-generator-page' %}"
          class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors duration-150">
          <i class="fas fa-lightbulb text-secondary-600 w-5"></i>
          Topic Generator
        </a>

        {% if user.is_authenticated %}
        <a href="{% url 'student-dashboard' %}"
          class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors duration-150">
          <i class="fas fa-tachometer-alt text-primary-600 w-5"></i>
          My Dashboard
        </a>

        {% if user.role == 'ADMIN' or user.role == 'SUPER_ADMIN' or user.is_staff %}
        <a href="{% url 'admin-dashboard' %}"
          class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors duration-150">
          <i class="fas fa-shield-alt text-secondary-600 w-5"></i>
          Admin Panel
        </a>
        {% endif %}

        <form method="POST" action="{% url 'web-logout' %}">
          {% csrf_token %}
          <button type="submit"
            class="flex items-center gap-3 w-full px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors duration-150">
            <i class="fas fa-sign-out-alt w-5"></i>
            Logout
          </button>
        </form>

        {% else %}
        <div class="space-y-3 pt-2">
          <a href="{% url 'login-page' %}"
            class="block w-full px-4 py-3 text-center rounded-lg border border-primary-600 text-primary-600 font-medium hover:bg-primary-50 transition-colors duration-150">
            Sign In
          </a>
          <a href="{% url 'register-page' %}"
            class="block w-full px-4 py-3 text-center rounded-lg bg-gradient-to-r from-primary-600 to-secondary-600 text-white font-semibold hover:from-primary-700 hover:to-secondary-700 transition-all duration-200">
            Get Started Free
          </a>
        </div>
        {% endif %}
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-grow animate-fade-in">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="bg-gradient-to-b from-white to-slate-50 border-t border-slate-200 mt-16">
    <div class="container mx-auto px-4 sm:px-6 py-12">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <!-- Brand Column -->
        <div class="space-y-4">
          <a href="{% url 'landing' %}" class="flex items-center space-x-3">
            <div
              class="w-10 h-10 rounded-lg bg-gradient-to-br from-primary-600 to-secondary-600 flex items-center justify-center">
              <i class="fas fa-graduation-cap text-white text-lg"></i>
            </div>
            <div>
              <span
                class="font-bold text-xl bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent">ProjectHub</span>
              <span class="block text-xs text-slate-500 -mt-1">Academic Excellence</span>
            </div>
          </a>
          <p class="text-sm text-slate-600">
            Verified final year project materials for universities, polytechnics & colleges.
          </p>
          <div class="flex space-x-4">
            <a href="#"
              class="w-8 h-8 rounded-full bg-slate-100 hover:bg-primary-100 flex items-center justify-center text-slate-600 hover:text-primary-600 transition-colors duration-200">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="#"
              class="w-8 h-8 rounded-full bg-slate-100 hover:bg-primary-100 flex items-center justify-center text-slate-600 hover:text-primary-600 transition-colors duration-200">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="#"
              class="w-8 h-8 rounded-full bg-slate-100 hover:bg-primary-100 flex items-center justify-center text-slate-600 hover:text-primary-600 transition-colors duration-200">
              <i class="fab fa-linkedin-in"></i>
            </a>
            <a href="#"
              class="w-8 h-8 rounded-full bg-slate-100 hover:bg-primary-100 flex items-center justify-center text-slate-600 hover:text-primary-600 transition-colors duration-200">
              <i class="fab fa-instagram"></i>
            </a>
          </div>
        </div>

        <!-- Quick Links -->
        <div>
          <h3 class="font-semibold text-slate-900 mb-4">Quick Links</h3>
          <ul class="space-y-3">
            <li><a href="{% url 'project-list-page' %}"
                class="text-sm text-slate-600 hover:text-primary-600 transition-colors duration-150 flex items-center gap-2">
                <i class="fas fa-chevron-right text-xs text-primary-500"></i>
                Browse Projects
              </a></li>
            <li><a href="{% url 'topic-generator-page' %}"
                class="text-sm text-slate-600 hover:text-primary-600 transition-colors duration-150 flex items-center gap-2">
                <i class="fas fa-chevron-right text-xs text-primary-500"></i>
                Topic Generator
              </a></li>
            <li><a href="{% url 'student-dashboard' %}"
                class="text-sm text-slate-600 hover:text-primary-600 transition-colors duration-150 flex items-center gap-2">
                <i class="fas fa-chevron-right text-xs text-primary-500"></i>
                Student Dashboard
              </a></li>
          </ul>
        </div>

        <!-- Resources -->
        <div>
          <h3 class="font-semibold text-slate-900 mb-4">Resources</h3>
          <ul class="space-y-3">
            <li><a href="{% url 'about-page' %}"
                class="text-sm text-slate-600 hover:text-primary-600 transition-colors duration-150 flex items-center gap-2">
                <i class="fas fa-chevron-right text-xs text-primary-500"></i>
                About Us
              </a></li>
            <li><a href="#"
                class="text-sm text-slate-600 hover:text-primary-600 transition-colors duration-150 flex items-center gap-2">
                <i class="fas fa-chevron-right text-xs text-primary-500"></i>
                How It Works
              </a></li>
            <li><a href="#"
                class="text-sm text-slate-600 hover:text-primary-600 transition-colors duration-150 flex items-center gap-2">
                <i class="fas fa-chevron-right text-xs text-primary-500"></i>
                Pricing
              </a></li>
          </ul>
        </div>

        <!-- Legal -->
        <div>
          <h3 class="font-semibold text-slate-900 mb-4">Legal</h3>
          <ul class="space-y-3">
            <li><a href="{% url 'terms-page' %}"
                class="text-sm text-slate-600 hover:text-primary-600 transition-colors duration-150 flex items-center gap-2">
                <i class="fas fa-chevron-right text-xs text-primary-500"></i>
                Terms of Service
              </a></li>
            <li><a href="{% url 'privacy-page' %}"
                class="text-sm text-slate-600 hover:text-primary-600 transition-colors duration-150 flex items-center gap-2">
                <i class="fas fa-chevron-right text-xs text-primary-500"></i>
                Privacy Policy
              </a></li>
            <li><a href="{% url 'contact-page' %}"
                class="text-sm text-slate-600 hover:text-primary-600 transition-colors duration-150 flex items-center gap-2">
                <i class="fas fa-chevron-right text-xs text-primary-500"></i>
                Contact Us
              </a></li>
          </ul>
        </div>
      </div>

      <!-- Bottom Bar -->
      <div class="border-t border-slate-200 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
        <p class="text-sm text-slate-600">
          &copy; {% now 'Y' %} ProjectHub. All rights reserved.
        </p>
        <div class="flex items-center space-x-6 mt-4 md:mt-0">
          <span class="text-sm text-slate-600 flex items-center gap-2">
            <i class="fas fa-shield-alt text-secondary-500"></i>
            100% Secure Payments
          </span>
          <span class="text-sm text-slate-600 flex items-center gap-2">
            <i class="fas fa-check-circle text-primary-500"></i>
            Verified Materials
          </span>
        </div>
      </div>
    </div>
  </footer>

  <!-- Mobile Menu Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const mobileMenuButton = document.getElementById('mobileMenuButton');
      const mobileMenu = document.getElementById('mobileMenu');

      if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', function () {
          mobileMenu.classList.toggle('hidden');
          const icon = mobileMenuButton.querySelector('i');
          if (mobileMenu.classList.contains('hidden')) {
            icon.classList.remove('fa-times');
            icon.classList.add('fa-bars');
          } else {
            icon.classList.remove('fa-bars');
            icon.classList.add('fa-times');
          }
        });
      }

      // Close mobile menu when clicking outside
      document.addEventListener('click', function (event) {
        if (!mobileMenu.contains(event.target) && !mobileMenuButton.contains(event.target) && !mobileMenu.classList.contains('hidden')) {
          mobileMenu.classList.add('hidden');
          const icon = mobileMenuButton.querySelector('i');
          icon.classList.remove('fa-times');
          icon.classList.add('fa-bars');
        }
      });

      // Show user feedback messages
      {% if messages %}
      {% for message in messages %}
      showNotification('{{ message.tags }}', '{{ message }}');
      {% endfor %}
      {% endif %}
    });

    function showNotification(type, message) {
      // Create notification element
      const notification = document.createElement('div');
      notification.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg border-l-4 ${getNotificationClass(type)} animate-fade-in`;
      notification.innerHTML = `
        <div class="flex items-center">
          <i class="fas ${getNotificationIcon(type)} mr-3"></i>
          <span>${message}</span>
          <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-slate-500 hover:text-slate-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
      `;

      document.body.appendChild(notification);

      // Auto remove after 5 seconds
      setTimeout(() => {
        if (notification.parentElement) {
          notification.remove();
        }
      }, 5000);
    }

    function getNotificationClass(type) {
      const classes = {
        'success': 'bg-green-50 text-green-800 border-green-500',
        'error': 'bg-red-50 text-red-800 border-red-500',
        'warning': 'bg-yellow-50 text-yellow-800 border-yellow-500',
        'info': 'bg-blue-50 text-blue-800 border-blue-500',
      };
      return classes[type] || classes.info;
    }

    function getNotificationIcon(type) {
      const icons = {
        'success': 'fa-check-circle',
        'error': 'fa-exclamation-circle',
        'warning': 'fa-exclamation-triangle',
        'info': 'fa-info-circle',
      };
      return icons[type] || icons.info;
    }
  </script>

  {% block scripts %}{% endblock %}
</body>

</html>